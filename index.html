<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Basic Webpage — Text, Table & Picture</title>
  <style>
    body {
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      max-width: 900px;
      margin: 3rem auto;
      padding: 0 1rem;
      line-height: 1.6;
      color: #222;
    }
    header { text-align: center; margin-bottom: 2rem; }
    h1 { margin: 0; font-size: 2rem; }
    .intro { margin-bottom: 1.5rem; }
    figure { margin: 1.5rem 0; text-align: center; }
    img { max-width: 100%; height: auto; border-radius: 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.06); }
    figcaption { font-size: 0.9rem; color: #555; margin-top: 0.5rem; }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    th, td {
      padding: 0.6rem 0.75rem;
      border: 1px solid #e0e0e0;
      text-align: left;
    }
    th { background: #f7f7f7; }
    @media (prefers-color-scheme: dark) {
      body { color: #ddd; background: #111; }
      th, td { border-color: #333; }
      th { background: #222; }
      figcaption { color: #aaa; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Welcome to the Tracker</h1>
    <p class="intro">Here is where we will take in your macronutrients and show you how you are doing</p>
  </header>

      <h2 id="sample-table">Macronutrients Table</h2>
      <table>
        <caption style="caption-side: top; text-align: left; font-weight: 600; margin-bottom: 0.5rem;">
          Weekly tasks and status
        </caption>
        <thead>
          <tr>
            <th>Food Type</th>
            <th>Percentage of Total Intake</th>
            <th>Target Intake</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Protien</td>
            <td id = "protienIntake"></td>
            <td>45% - 65%</td>
          </tr>
          <tr>
            <td>Carbohydrates</td>
            <td id = "carbohydrateIntake"></td>
            <td>20% - 35%</td>
          </tr>
          <tr>
            <td>Fats</td>
            <td id = "fatIntake"></td>
            <td>10% - 35%</td>
          </tr>
          <tr>
            <td>Calories</td>
            <td id = "caloricIntake"></td>
            <td id = "expectedCalories"></td>
          </tr>
        </tbody>
      </table>

      <form method = "POST" action = "/submit_info">
        <label for="protein">Protien:</label><input name = "protein" type="number"><br><br>
        <label for="carbohydrates">Carbohydrates:</label><input name = "carbohydrate"  type="number"><br><br>
        <label for="fats">Fats:</label><input  name = "fat"  type="number"><br><br>
        <label for="calorie">Calories:</label><input name = "calories"  type="number"><br><br>
        <input type = "submit" value = "SUBMIT">
      </form>

  </main>

  <footer style="margin-top: 2rem; text-align:center; color:#666; font-size:0.9rem;">
    © <span id="year"></span> My Simple Page
  </footer>

  <script>
    let x = await fetch("/api/days/");
    let data = await x.text();
    let sum = new Array(4);
    for (var i = 0; i < 4; i++){
      sum[i] = 0;
    }
    var i = 1;
    while (data["day" + String(i)] && x < 7){
      sum[0] = sum[0] + data["day" + String(i)]["protien"];
      sum[1] = sum[1] + data["day" + String(i)]["carbohydrates"];
      sum[2] = sum[2] + data["day" + String(i)]["fats"];
      sum[3] = sum[3] + data["day" + String(i)]["calories"];
    }
    Document.getElementById("protienIntake").innerHTML = Math.round((sum[0] / sum[3])*1000) /100;
    Document.getElementById("carbohydrateIntake").innerHTML = Math.round((sum[1] / sum[3])*1000) /100;
    Document.getElementById("fatIntake").innerHTML = Math.round((sum[2] / sum[3])*1000) /100;
    Document.getElementById("caloricIntake").innerHTML = sum[3];

    let y = await fetch("/api/days/");
    let info = await y.text();
    if (info["sex"] == "male"){
      Document.getElementById("expectedCalories") = 12 * info["weight"] + 6.25 * info[height] - 120;
    }
    else{
      Document.getElementById("expectedCalories") = 12 * info["weight"] + 6.25 * info[height] - 286;
    }
    //[protien, carbohydrates, fats, calories]

  </script>
</body>
</html>
